{"version":3,"file":"index.esm.js","sources":["../src/index.ts"],"sourcesContent":["\"use client\";\nimport { useState, useEffect, useRef, useCallback } from \"react\";\nimport { usePathname } from \"next/navigation\";\n\nexport type NavigationStatus = \"idle\" | \"loading\" | \"complete\" | \"error\";\n\nexport interface NavigationStep {\n\tname: string;\n\tweight: number;\n\tcompleted: boolean;\n\ttimestamp?: number;\n}\n\nexport interface NavigationProgressOptions {\n\t/**\n\t * Timeout in milliseconds before marking navigation as failed\n\t * @default 10000\n\t */\n\ttimeout?: number;\n\t/**\n\t * Custom navigation steps with weights\n\t * @default predefined steps\n\t */\n\tsteps?: Array<{ name: string; weight: number }>;\n\t/**\n\t * Automatically complete progress when all steps are done\n\t * @default true\n\t */\n\tenableAutoComplete?: boolean;\n\t/**\n\t * Debounce time in milliseconds for progress updates\n\t * @default 100\n\t */\n\tdebounceMs?: number;\n}\n\nexport interface NavigationProgressReturn {\n\t/** Current navigation status */\n\tstatus: NavigationStatus;\n\t/** Progress percentage (0-100) */\n\tprogress: number;\n\t/** Navigation duration in milliseconds */\n\tduration: number;\n\t/** Error message if status is \"error\" */\n\terror?: string;\n\t/** Manually finish the navigation progress */\n\tfinish: () => void;\n\t/** Mark a specific step as complete */\n\tmarkStepComplete: (stepName: string) => void;\n\t/** Reset progress to idle state */\n\treset: () => void;\n}\n\nconst DEFAULT_STEPS = [\n\t{ name: \"route_change\", weight: 20 },\n\t{ name: \"component_mount\", weight: 30 },\n\t{ name: \"hydration\", weight: 25 },\n\t{ name: \"resources_load\", weight: 25 },\n];\n\n/**\n * navigation progress hook for Next.js App Router\n * author: https://github.com/r2hu1\n * source code: https://github.com/r2hu1/use-navigation-progress\n *\n * @param options Configuration options for the hook\n * @returns Navigation progress state and control functions\n *\n * @example\n * ```tsx\n * const { status, progress, markStepComplete } = useNavigationProgress();\n *\n * // Use in a progress bar component\n * {status === 'loading' && (\n *   <div className=\"progress-bar\">\n *     <div style={{ width: `${progress}%` }} />\n *   </div>\n * )}\n * ```\n */\nexport function useNavigationProgress(\n\toptions: NavigationProgressOptions = {},\n): NavigationProgressReturn {\n\tconst {\n\t\ttimeout = 10000,\n\t\tsteps = DEFAULT_STEPS,\n\t\tenableAutoComplete = true,\n\t\tdebounceMs = 100,\n\t} = options;\n\n\tconst pathname = usePathname();\n\tconst [status, setStatus] = useState<NavigationStatus>(\"idle\");\n\tconst [progress, setProgress] = useState(0);\n\tconst [duration, setDuration] = useState(0);\n\tconst [error, setError] = useState<string>();\n\n\t// Refs for cleanup and state management\n\tconst prevPath = useRef(pathname);\n\tconst startTime = useRef<number | null>(null);\n\tconst timeoutRef = useRef<number | null>(null);\n\tconst rafRef = useRef<number | null>(null);\n\tconst stepsRef = useRef<NavigationStep[]>([]);\n\tconst lastUpdateTime = useRef(0);\n\tconst isUnmounted = useRef(false);\n\n\t// Initialize steps\n\tuseEffect(() => {\n\t\tstepsRef.current = steps.map((step) => ({\n\t\t\t...step,\n\t\t\tcompleted: false,\n\t\t}));\n\t}, [steps]);\n\n\t// Safe state updater that checks if component is mounted\n\tconst safeSetState = useCallback((updater: () => void) => {\n\t\tif (!isUnmounted.current) {\n\t\t\tupdater();\n\t\t}\n\t}, []);\n\n\t// Debounced progress calculation\n\tconst updateProgress = useCallback(() => {\n\t\tconst now = Date.now();\n\t\tif (now - lastUpdateTime.current < debounceMs) return;\n\t\tlastUpdateTime.current = now;\n\n\t\tif (rafRef.current) cancelAnimationFrame(rafRef.current);\n\n\t\trafRef.current = requestAnimationFrame(() => {\n\t\t\tconst totalWeight = stepsRef.current.reduce(\n\t\t\t\t(sum, step) => sum + step.weight,\n\t\t\t\t0,\n\t\t\t);\n\t\t\tconst completedWeight = stepsRef.current\n\t\t\t\t.filter((step) => step.completed)\n\t\t\t\t.reduce((sum, step) => sum + step.weight, 0);\n\n\t\t\tconst newProgress = Math.min(\n\t\t\t\tMath.round((completedWeight / totalWeight) * 100),\n\t\t\t\t100,\n\t\t\t);\n\n\t\t\tsafeSetState(() => {\n\t\t\t\tsetProgress(newProgress);\n\t\t\t\tif (startTime.current) {\n\t\t\t\t\tsetDuration(Date.now() - startTime.current);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Auto-complete if all steps done\n\t\t\tif (enableAutoComplete && newProgress === 100 && status === \"loading\") {\n\t\t\t\tsetTimeout(() => finish(), 50);\n\t\t\t}\n\t\t});\n\t}, [debounceMs, enableAutoComplete, status, safeSetState]);\n\n\t// Reset all state\n\tconst reset = useCallback(() => {\n\t\tif (timeoutRef.current) {\n\t\t\tclearTimeout(timeoutRef.current);\n\t\t\ttimeoutRef.current = null;\n\t\t}\n\t\tif (rafRef.current) {\n\t\t\tcancelAnimationFrame(rafRef.current);\n\t\t\trafRef.current = null;\n\t\t}\n\n\t\tstepsRef.current = steps.map((step) => ({\n\t\t\t...step,\n\t\t\tcompleted: false,\n\t\t}));\n\n\t\tsafeSetState(() => {\n\t\t\tsetStatus(\"idle\");\n\t\t\tsetProgress(0);\n\t\t\tsetDuration(0);\n\t\t\tsetError(undefined);\n\t\t});\n\n\t\tstartTime.current = null;\n\t}, [steps, safeSetState]);\n\n\t// Start navigation tracking\n\tconst startNavigation = useCallback(() => {\n\t\treset();\n\t\tstartTime.current = Date.now();\n\n\t\tsafeSetState(() => {\n\t\t\tsetStatus(\"loading\");\n\t\t});\n\n\t\t// Mark route change as complete immediately\n\t\tmarkStepComplete(\"route_change\");\n\n\t\t// Set timeout for navigation\n\t\ttimeoutRef.current = window.setTimeout(() => {\n\t\t\tsafeSetState(() => {\n\t\t\t\tsetStatus(\"error\");\n\t\t\t\tsetError(\"Navigation timeout\");\n\t\t\t});\n\t\t}, timeout);\n\t}, [reset, timeout, safeSetState]);\n\n\t// Mark specific step as complete\n\tconst markStepComplete = useCallback(\n\t\t(stepName: string) => {\n\t\t\tconst step = stepsRef.current.find((s) => s.name === stepName);\n\t\t\tif (step && !step.completed) {\n\t\t\t\tstep.completed = true;\n\t\t\t\tstep.timestamp = Date.now();\n\t\t\t\tupdateProgress();\n\t\t\t}\n\t\t},\n\t\t[updateProgress],\n\t);\n\n\t// Finish navigation\n\tconst finish = useCallback(() => {\n\t\tif (timeoutRef.current) {\n\t\t\tclearTimeout(timeoutRef.current);\n\t\t\ttimeoutRef.current = null;\n\t\t}\n\n\t\t// Mark all steps as complete\n\t\tstepsRef.current.forEach((step) => {\n\t\t\tstep.completed = true;\n\t\t\tstep.timestamp = step.timestamp || Date.now();\n\t\t});\n\n\t\tsafeSetState(() => {\n\t\t\tsetProgress(100);\n\t\t\tsetStatus(\"complete\");\n\t\t});\n\n\t\t// Reset to idle after animation\n\t\tsetTimeout(() => {\n\t\t\tsafeSetState(() => {\n\t\t\t\tsetStatus(\"idle\");\n\t\t\t\tsetProgress(0);\n\t\t\t\tsetDuration(0);\n\t\t\t\tsetError(undefined);\n\t\t\t});\n\t\t}, 300);\n\t}, [safeSetState]);\n\n\t// Route change detection\n\tuseEffect(() => {\n\t\tif (pathname !== prevPath.current) {\n\t\t\tprevPath.current = pathname;\n\t\t\tstartNavigation();\n\t\t}\n\t}, [pathname, startNavigation]);\n\n\t// Auto-detect component mount\n\tuseEffect(() => {\n\t\tif (status === \"loading\") {\n\t\t\tconst timer = setTimeout(() => {\n\t\t\t\tmarkStepComplete(\"component_mount\");\n\t\t\t}, 16);\n\n\t\t\treturn () => clearTimeout(timer);\n\t\t}\n\t}, [status, markStepComplete]);\n\n\t// Auto-detect hydration and resource loading\n\tuseEffect(() => {\n\t\tif (!enableAutoComplete || status !== \"loading\") return;\n\n\t\tlet hydrationTimer: number;\n\t\tlet resourceTimer: number;\n\n\t\thydrationTimer = window.setTimeout(() => {\n\t\t\tconst componentMountStep = stepsRef.current.find(\n\t\t\t\t(s) => s.name === \"component_mount\",\n\t\t\t);\n\t\t\tif (componentMountStep?.completed) {\n\t\t\t\tmarkStepComplete(\"hydration\");\n\t\t\t}\n\t\t}, 100);\n\n\t\tconst checkResources = () => {\n\t\t\tconst images = Array.from(document.images);\n\t\t\tconst unloadedImages = images.filter((img) => !img.complete);\n\n\t\t\tif (images.length === 0 || unloadedImages.length === 0) {\n\t\t\t\tmarkStepComplete(\"resources_load\");\n\t\t\t} else {\n\t\t\t\tresourceTimer = window.setTimeout(checkResources, 200);\n\t\t\t}\n\t\t};\n\n\t\tsetTimeout(checkResources, 150);\n\n\t\treturn () => {\n\t\t\tclearTimeout(hydrationTimer);\n\t\t\tclearTimeout(resourceTimer);\n\t\t};\n\t}, [status, enableAutoComplete, markStepComplete]);\n\n\t// Cleanup on unmount\n\tuseEffect(() => {\n\t\treturn () => {\n\t\t\tisUnmounted.current = true;\n\t\t\tif (timeoutRef.current) clearTimeout(timeoutRef.current);\n\t\t\tif (rafRef.current) cancelAnimationFrame(rafRef.current);\n\t\t};\n\t}, []);\n\n\treturn {\n\t\tstatus,\n\t\tprogress,\n\t\tduration,\n\t\terror,\n\t\tfinish,\n\t\tmarkStepComplete,\n\t\treset,\n\t};\n}\n\n// Export default\nexport default useNavigationProgress;\n"],"names":[],"mappings":"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"}